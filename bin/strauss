#!/usr/bin/env php
<?php
call_user_func(function ($version) {
    $autoloaders = Phar::running() === ''
        ? []
        : [__DIR__ . '/../vendor/autoload.php'];
    $autoloaders[] = getcwd() . '/vendor/autoload.php';
    $autoloaders[] = getcwd() . '/../../autoload.php';
    $autoloaders[] = __DIR__ . '/../vendor/autoload.php';
    $autoloaders[] = __DIR__ . '/../../../autoload.php';

    foreach ($autoloaders as $autoloader) {
        if (!is_file($autoloader)) {
            continue;
        }
        require $autoloader;
        break;
    }

    if (!class_exists(Composer\Autoload\ClassLoader::class)) {
        fwrite(STDERR,
            'You must set up the project dependencies, run the following commands:' . PHP_EOL
            . 'curl -s https://getcomposer.org/installer | php' . PHP_EOL
            . 'php composer.phar install' . PHP_EOL
        );
        exit(1);
    }

    $app = new BrianHenryIE\Strauss\Console\Application($version);
    $app->run();
}, '0.18.0');
